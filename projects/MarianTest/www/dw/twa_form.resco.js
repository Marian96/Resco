var dwtwa_form=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=124)}([,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i=function(){function e(){}return e.prototype.retrieveInstalledBaseByIds=function(e){return new Promise((function(t,n){null!=e&&0!==e.length||t(null);var r=new MobileCRM.FetchXml.Entity("speed1_installedbase");r.addAttributes(),r.filter=new MobileCRM.FetchXml.Filter,r.filter.isIn("speed1_installedbaseid",e),new MobileCRM.FetchXml.Fetch(r).execute("JSON",(function(e){null!=e&&0<e.length&&t(e),t(null)}),(function(e){n(e)}),null)}))},e.prototype.retrieveById=function(e){return new Promise((function(t,n){var i=new r.InstalledBaseEntityNames,o=new MobileCRM.FetchXml.Entity(i.entityLogicalName);o.addAttributes(),o.filter=new MobileCRM.FetchXml.Filter,o.filter.where(i.installedbaseid,"eq",e),new MobileCRM.FetchXml.Fetch(o).execute("DynamicEntities",(function(e){var n=new MobileCRM.DynamicEntity(i.entityLogicalName);e&&0<e.length&&(n=e[0]),t(n)}),(function(t){n("InstalledBase retrieveById ["+e+"] error:\n "+t)}),null)}))},e}();t.InstalledBase=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SystemUserEntityNames=function(){this.entityLogicalName="systemuser",this.companycode="dw_companycode",this.costcenter="dw_costcenter",this.defaultstoragelocation="dw_defaultstoragelocation",this.division="speed1_division",this.fullname="fullname",this.mainphone="address1_telephone1",this.orgKey2="dw_org_key_2",this.orgKey3="dw_org_key_3",this.orgKey4="dw_org_key_4",this.plant="dw_plant",this.salesorganization="dw_salesorganization",this.systemuserid="systemuserid",this.workcenter="dw_technicianid"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.retrieveServiceorderById=function(e){return new Promise((function(t,n){var r=new MobileCRM.FetchXml.Entity("dw_serviceorder");r.addAttributes(),r.filter=new MobileCRM.FetchXml.Filter,r.filter.where("dw_serviceorderid","eq",e),new MobileCRM.FetchXml.Fetch(r).execute("JSON",(function(e){t(e)}),(function(e){n(e)}),null)}))},t.retrieveServiceorderByIds=function(e){return new Promise((function(t,n){var r=new MobileCRM.FetchXml.Entity("dw_serviceorder");r.addAttributes(),r.filter=new MobileCRM.FetchXml.Filter,r.filter.isIn("dw_serviceorderid",e),new MobileCRM.FetchXml.Fetch(r).execute("JSON",(function(e){t(e)}),(function(e){n(e)}),null)}))},t.retrieveAllServiceorders=function(){return new Promise((function(e,t){var n=new MobileCRM.FetchXml.Entity("dw_serviceorder");n.addAttributes();var r=new MobileCRM.FetchXml.Fetch(n);r.count=1e3,r.execute("JSON",(function(t){e(t)}),(function(e){t(e)}),null)}))},t.updateTestResultStatus=function(e,t){return new Promise((function(n,r){var i=new MobileCRM.DynamicEntity("dw_serviceorder",e.dw_serviceorderid.id);i.properties.dw_testprocedurestatus=t,i.save((function(e){return e?r(e):n(i.properties)}))}))},t.updateTestResultStatusByServiceorderId=function(e,t){return new Promise((function(n,r){var i=new MobileCRM.DynamicEntity("dw_serviceorder",e);i.properties.dw_testprocedurestatus=t,i.save((function(e){return e?r(e):n()}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InstalledBaseEntityNames=function(){this.entityLogicalName="speed1_installedbase",this.createdon="createdon",this.alarmlevel1="dw_alarmlevel1",this.alarmlevel2="dw_alarmlevel2",this.barcodenumber="dw_barcodenumber",this.calibrationvalue="dw_calibrationvalue",this.certificate="dw_certificate",this.channel="dw_channel",this.contractlineid="dw_contractlineid",this.contractnumberid="dw_contractnumberid",this.contracttypeid="dw_contracttypeid",this.documentslink="dw_documentslink",this.enduserpartyid="dw_enduserpartyid",this.eqart="dw_eqart",this.foldernumber="dw_foldernumber",this.functionalunitid="dw_functionalunitid",this.ibdocumentationweblink="dw_ibdocumentationweblink",this.ibtoenduserid="dw_ibtoenduserid",this.lastmaintenancedate="dw_lastmaintenancedate",this.lastsafetycheck="dw_lastsafetycheck",this.localmaterialid="dw_localmaterialid",this.location1erp="dw_location1erp",this.maininstitutionshipto="dw_maininstitutionid_shipto",this.maintenanceintervalerp="dw_maintenanceintervalerp",this.materialdescription="dw_materialdescription",this.measuringrange="dw_measuringrange",this.nextexchange="dw_nextexchange",this.nextmaintenancedue="dw_nextmaintenancedue",this.parentinstalledbaseid="dw_parentinstalledbaseid",this.plannergroupid="dw_plannergroupid",this.planplant="dw_planplant",this.protectionclass="dw_protectionclass",this.reinstallationdate="dw_reinstallationdate",this.safetychecknumber="dw_safetychecknumber",this.safetycheckresult="dw_safetycheckresult",this.sensorexchangedate="dw_sensorexchangedate",this.sensortype="dw_sensortype",this.servicecharacteristics="dw_servicecharacteristics",this.serviceoption="dw_serviceoption",this.softwareversionid="dw_softwareversionid",this.specificlocationtwo="dw_specificlocationtwo",this.systemcharacteristics="dw_systemcharacteristics",this.targetgas="dw_targetgas",this.technicalid="dw_technicalid",this.testgas="dw_testgas",this.tgtext1="dw_tgtext1",this.udirelevant="dw_udirelevant",this.uniquedeviceidentifier="dw_uniquedeviceidentifier",this.modifiedby="modifiedby",this.modifiedon="modifiedon",this.ownerid="ownerid",this.companycode="speed1_companycode",this.costcentercustomer="speed1_costcentercustomer",this.customerinventorynumber="speed1_customerinventorynumber",this.dateofmanufacture="speed1_dateofmanufacture",this.endoflife="speed1_endoflife",this.endofservice="speed1_endofservice",this.endwarrantydate="speed1_endwarrantydate",this.equipmentmanagerid="speed1_equipmentmanagerid",this.equipmentnumber="speed1_equipmentnumber",this.extendedwarrantyend="speed1_extendedwarrantyend",this.installationdate="speed1_installationdate",this.installedbaseid="speed1_installedbaseid",this.iserp="speed1_iserp",this.location="speed1_location",this.materialnumberid="speed1_materialnumberid",this.name="speed1_name",this.quantity="speed1_quantity",this.replacementdate="speed1_replacementdate",this.serialnumber="speed1_serialnumber",this.shipmentdate="speed1_shipmentdate",this.shippedtoid="speed1_shippedtoid",this.soldtoid="speed1_soldtoid",this.startwarrantydate="speed1_startwarrantydate",this.transactioncurrencyid="transactioncurrencyid"}},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),i=function(){function e(){}return e.prototype.retrieveById=function(e){return new Promise((function(t,n){var i=new r.SystemUserEntityNames,o=new MobileCRM.FetchXml.Entity(i.entityLogicalName);o.addAttributes(),o.filter=new MobileCRM.FetchXml.Filter,o.filter.where(i.systemuserid,"eq",e),new MobileCRM.FetchXml.Fetch(o).execute("DynamicEntities",(function(e){e&&0<e.length&&e[0]?t(e[0]):n("SystemUser.retrieveById: Record not found!")}),(function(e){n(e)}),null)}))},e.prototype.retrieveCurrentUser=function(){return new Promise((function(e,t){var n=new r.SystemUserEntityNames,i=new MobileCRM.FetchXml.Entity(n.entityLogicalName);i.addAttributes(),i.filter=new MobileCRM.FetchXml.Filter,i.filter.where(n.systemuserid,"eq-userid",null),new MobileCRM.FetchXml.Fetch(i).execute("DynamicEntities",(function(n){n&&0<n.length&&n[0]?e(n[0]):t("Record not found!")}),(function(e){t(e)}),null)}))},e.prototype.retrieveSystemUser=function(){return new Promise((function(e,t){var n=new MobileCRM.FetchXml.Entity("systemuser");n.addAttributes(),n.filter=new MobileCRM.FetchXml.Filter,n.filter.where("systemuserid","eq-userid",null),new MobileCRM.FetchXml.Fetch(n).execute("JSON",(function(t){if(t&&0<t.length&&t[0])return e(t[0])}),(function(e){return t(e)}),null)}))},e}();t.SystemUser=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(19);function i(e,t){var n=JSON.stringify(e);MobileCRM.Application.writeFile("TWA/"+t,n,!1)}t.saveToJsonFile=i,t.readFromJsonFile=function(e){return new Promise((function(t,n){MobileCRM.Application.readFile("TWA/"+e,(function(e){var n=JSON.parse(e);t(n)}),(function(e){n(e)}))}))},t.deleteTwaFile=function(e){return new Promise((function(t,n){MobileCRM.Application.deleteFile("TWA/"+e,(function(){t()}),(function(e){n(e)}))}))},t.writeAnnotationToFile=function(e){return new Promise((function(t,n){var r="TWA/"+e.FileName;MobileCRM.Application.writeFileFromBase64(r,e.DocumentBody,(function(){t(r)}),(function(e){n(e)}))}))},t.writeReadyStatus=function(e){var t={ErrorMessage:"",Status:"Success"};null!=e&&""!==e&&(t.ErrorMessage=JSON.stringify(e),t.Status="Failed"),i(t,r.FileNames.DataReady)}},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(15),i=function(){function e(){}return e.prototype.applicationFeatureSettingFetch=function(e,t,n,r,i,o){var s=this;return new Promise((function(u,l){var a=new MobileCRM.FetchXml.Entity("dw_applicationfeaturesetting");a.addAttributes(),s.createFetchFilterForSingleSetting(a,e,t,n,r,i,o),new MobileCRM.FetchXml.Fetch(a).execute("DynamicEntities",u,l,null)}))},e.prototype.retrieveByFeatureKey=function(e){return new Promise((function(t,n){var r=new MobileCRM.FetchXml.Entity("dw_applicationfeaturesetting");r.addAttributes(),r.filter=new MobileCRM.FetchXml.Filter,r.filter.where("dw_featurekey","eq",e),new MobileCRM.FetchXml.Fetch(r).execute("DynamicEntities",t,n,null)}))},e.prototype.retrieveApplicationFeatureSettings=function(e,t,n,i,o){var s=this;return new Promise((function(u,l){var a=new MobileCRM.FetchXml.Entity("dw_applicationfeaturesetting");a.addAttributes(),s.createFetchFilterForSettings(a,e,t,n,i,o),new MobileCRM.FetchXml.Fetch(a).execute("JSON",(function(e){var t;if(e&&0<e.length){var n=!1,i=!1,o="",a=new r.ApplicationFeatureSettings;return n=(t=s.extractSettingsFromApplicationFeatures(e,n,i,o)).checkTestTools,i=t.completeTestSteps,a=t.twaApplicationSettings,o=t.twaVersion,u(a)}return l("No application features settings found")}),(function(e){return l(e)}),null)}))},e.prototype.extractSettingsFromApplicationFeatures=function(e,t,n,i){for(var o=0;o<e.length;o++)"TWA.Close.CheckTestTools"===e[o].dw_featurekey&&(t=e[o].dw_featurevalue.toLowerCase()),"TWA.Close.CompleteTeststeps"===e[o].dw_featurekey&&(n=e[o].dw_featurevalue.toLowerCase()),"TwaVersionNumber"===e[o].dw_featurekey&&(i=e[o].dw_featurevalue);var s=new r.ApplicationFeatureSettings;return s.IsCompleteAllTestStepsRequired=n,s.IsCheckTestToolsRequired=t,s.SupportedTwaVersion=i,{twaApplicationSettings:s,checkTestTools:t,completeTestSteps:n,twaVersion:i}},e.prototype.createFetchFilterForSingleSetting=function(e,t,n,r,i,o,s){e.addAttribute("dw_applicationfeaturesettingid"),e.filter=new MobileCRM.FetchXml.Filter,e.filter.where("dw_featurekey","eq",n),e.filter.where("dw_featurevalue","eq",!0);var u=e.addLink("dw_applicationfeature","dw_applicationfeatureid","dw_applicationfeatureid","inner");u.filter=new MobileCRM.FetchXml.Filter,t&&u.filter.startsWith("dw_featurename",t),u.filter.where("dw_division","eq",r);var l=new MobileCRM.FetchXml.Filter;l.type="or",l.where("dw_org_key_2","eq",i),l.where("dw_org_key_2","not-null",null),u.filter.filters.push(l);var a=new MobileCRM.FetchXml.Filter;a.type="or",a.where("dw_org_key_3","eq",o),a.where("dw_org_key_3","not-null",null),u.filter.filters.push(a);var c=new MobileCRM.FetchXml.Filter;c.type="or",c.where("dw_org_key_4","eq",s),c.where("dw_org_key_4","not-null",null),u.filter.filters.push(c)},e.prototype.createFetchFilterForSettings=function(e,t,n,r,i,o){var s=e.addLink("dw_applicationfeature","dw_applicationfeatureid","dw_applicationfeatureid","outer");s.addAttribute("dw_featurename"),s.addAttribute("dw_division"),s.addAttribute("dw_org_key_2"),s.addAttribute("dw_org_key_3"),s.addAttribute("dw_org_key_4"),s.filter=new MobileCRM.FetchXml.Filter;var u=new MobileCRM.FetchXml.Filter;u.startsWith("dw_featurename",t),s.filter.filters.push(u);var l=new MobileCRM.FetchXml.Filter;l.where("dw_division","eq",n),s.filter.filters.push(l);var a=new MobileCRM.FetchXml.Filter;a.where("dw_org_key_2","eq",r),s.filter.filters.push(a);var c=new MobileCRM.FetchXml.Filter;c.where("dw_org_key_3","eq",i),s.filter.filters.push(c);var d=new MobileCRM.FetchXml.Filter;d.where("dw_org_key_4","eq",o),s.filter.filters.push(d)},e}();t.ApplicationFeatureSetting=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationFeatureSettings=function(){}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(18),i=n(6),o=function(){function e(){}return e.prototype.updateServiceOrderAndDispatchStatusInProgress=function(e){var t=this;return new Promise((function(n,o){i.retrieveServiceorderById(e).then((function(i){if(null==i||0===i.length)return o("ServiceOrder cannot get recieved!");var s=null!=i[0].dw_dispatchid?i[0].dw_dispatchid.id:null,u=i[0].dw_serviceorderstatus;if(1!=u)return n();if(1==u){var l=new MobileCRM.DynamicEntity("dw_serviceorder",e);l.properties.dw_serviceorderstatus=1e8,l.save((function(e){return e?o(e):null==s||""===s?n():void r.retrieveDispatchStatusById(s).then((function(e){return null==e||1!==e.length||1e8!=e[0].dw_dispatchstatus?n():void t.updateDispatchStatus(s,100000001).then((function(){return n()}))})).catch((function(e){return o(e)}))}))}}))}))},e.prototype.updateServiceOrderStatus=function(e,t){return new Promise((function(n,r){var i=new MobileCRM.DynamicEntity("dw_serviceorder",e);i.properties.dw_serviceorderstatus=t,i.save((function(e){return e?r(e):n()}))}))},e.prototype.updateDispatchStatus=function(e,t){return new Promise((function(n,r){var i=new MobileCRM.DynamicEntity("dw_dispatch",e);i.properties.dw_dispatchstatus=t,i.save((function(e){return e?r(e):n()}))}))},e}();t.ServiceStatusManager=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.retrieveDispatchStatusById=function(e){return new Promise((function(t,n){var r=new MobileCRM.FetchXml.Entity("dw_dispatch");r.addAttribute("dw_dispatchstatus"),r.filter=new MobileCRM.FetchXml.Filter,r.filter.where("dw_dispatchid","eq",e),new MobileCRM.FetchXml.Fetch(r).execute("JSON",(function(e){t(e)}),(function(e){n(e)}),null)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.CreateResultHeader="Command CreateResultHeaders.json",e.DeleteResultHeaders="DeleteResultHeaders.json",e.InstalledBases="InstalledBases.json",e.EquipmentHistories="EquipmentHistories.json",e.FolderNumbers="FolderNumbers.json",e.Languages="Languages.json",e.OverallResults="OverallResults.json",e.ResultHeaders="ResultHeaders.json",e.ServiceOrders="ServiceOrders.json",e.SystemUser="SystemUser.json",e.TeamTools="TeamTools.json",e.TechnicianTools="TechnicianTools.json",e.TestProcedureDocumentAnnotations="TestProcedureDocumentAnnotations.json",e.TestProcedureDocuments="TestProcedureDocuments.json",e.TestProcedures="TestProcedures.json",e.TestStepAnnotations="TestStepAnnotations.json",e.TestSteps="TestSteps.json",e.TwaTestStepAttachments="TestStepAttachments.json",e.TwaTestStepResults="TestStepResults.json",e.TwaTestStepResultDocuments="TestStepResultDocuments.json",e.TwaTestStepResultDocumentAnnotations="TestStepResultDocumentAnnotations.json",e.TwaFinishResults="FinishResults.json",e.UserSettings="UserSettings.json",e.DataReady="resco.result",e.Stock="Stock.json",e.Mvke="Mvke.json",e.LocalMaterial="LocalMaterial.json",e.PriceListItem="PriceListItem.json",e.Currency="TransactionCurrency.json",e.AccountingIndicator="AccountingIndicator.json",e.BookedServiceOrderItem="BookedServiceOrderItem.json",e}();t.FileNames=r},,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(36);var r=n(17),i=function(){function e(){}return e.prototype.retrieveResultHeadersByServiceOrderIds=function(e){return new Promise((function(t,n){var r=new MobileCRM.FetchXml.Entity("dw_teststepresultheader");r.addAttributes(),r.filter=new MobileCRM.FetchXml.Filter,r.filter.isIn("dw_serviceorderid",e),r.addLink("dw_serviceorder","dw_serviceorderid","dw_serviceorderid","inner").addAttribute("dw_serviceordernumber"),new MobileCRM.FetchXml.Fetch(r).execute("JSON",(function(e){null!=e&&0<e.length&&t(e),t(null)}),(function(e){n(e)}),null)}))},e.prototype.retrieveResultHeadersByServiceOrderNumber=function(e){return new Promise((function(t,n){var r=new MobileCRM.FetchXml.Entity("dw_teststepresultheader");r.addAttributes();var i=r.addLink("dw_serviceorder","dw_serviceorderid","dw_serviceorderid","inner");i.addAttribute("dw_serviceordernumber"),i.filter=new MobileCRM.FetchXml.Filter,i.filter.where("dw_serviceordernumber","eq",e),new MobileCRM.FetchXml.Fetch(r).execute("JSON",(function(e){null!=e&&0<e.length&&t(e),t(null)}),(function(e){n(e)}),null)}))},e.prototype.retrieveResultHeadersByIds=function(e){return new Promise((function(t,n){var r=new MobileCRM.FetchXml.Entity("dw_teststepresultheader");r.addAttributes(),r.filter=new MobileCRM.FetchXml.Filter,r.filter.isIn("dw_teststepresultheaderid",e),new MobileCRM.FetchXml.Fetch(r).execute("JSON",(function(e){null!=e&&0<e.length&&t(e),t(null)}),(function(e){n(e)}),null)}))},e.prototype.updateResultHeader=function(e){return new Promise((function(t,n){var r=new MobileCRM.DynamicEntity("dw_teststepresultheader",e.ResultHeaderId),i=new MobileCRM.Reference("systemuser",e.SystemUserId),o=r.properties;o.dw_comment=e.Comment,o.dw_overallresult=e.OverallResult,o.dw_signatureid=i,o.dw_testinstructionclosedate=new Date,o.dw_mobileofflineaction=1e8,o.statuscode=1e8,null!=e.Tools&&(o.dw_tools=Base64.decode(e.Tools)),r.save((function(e){return e?n(e):t(r.properties)}))}))},e.prototype.deleteResultHeaderById=function(e){return new Promise((function(t,n){MobileCRM.DynamicEntity.deleteById("dw_teststepresultheader",e,(function(){return t(!0)}),(function(e){return n(e)}),null)}))},e.prototype.createResultHeader=function(e){return new Promise((function(t,n){var i=MobileCRM.DynamicEntity.createNew("dw_teststepresultheader"),o=i.properties,s=new MobileCRM.Reference("dw_serviceorder",e.ServiceOrderId),u=new MobileCRM.Reference("dw_testprocedure",e.TestProcedureId),l=new MobileCRM.Reference("dw_language",e.LanguageId);o.dw_serviceorderid=s,o.dw_languageid=l,o.dw_testprocedureid=u,o.dw_currencyformat=e.CurrencySymbol,o.dw_decimalsymbol=e.DecimalSymbol,o.dw_digitgroupingsymbol=e.NumberSeparator,o.dw_shortdateformat=e.UserDateFormat,o.dw_testinstructionstartdate=new Date,o.dw_name=e.Name,o.dw_foldernumber=e.FolderNumber,i.save((function(o){if(o)return n(o);(new r.ServiceStatusManager).updateServiceOrderAndDispatchStatusInProgress(e.ServiceOrderId).then((function(){var e={createdby:i.properties.createdby,createdon:i.properties.createdon,dw_currencyformat:i.properties.dw_currencyformat,dw_decimalsymbol:i.properties.dw_decimalsymbol,dw_digitgroupingsymbol:i.properties.dw_digitgroupingsymbol,dw_languageid:i.properties.dw_languageid,dw_modifiedby:i.properties.dw_modifiedby,dw_modifiedon:i.properties.dw_modifiedon,dw_name:i.properties.dw_name,dw_overallresult:i.properties.dw_overallresult,dw_ownerid:i.properties.dw_ownerid,dw_serviceorderid:i.properties.dw_serviceorderid,dw_shortdateformat:i.properties.dw_shortdateformat,dw_testinstructionstartdate:i.properties.dw_testinstructionstartdate,dw_testprocedureid:i.properties.dw_testprocedureid,dw_teststepresultheaderid:i.properties.dw_teststepresultheaderid};return t(e)})).catch((function(e){return n(e)}))}))}))},e}();t.ResultHeader=i},function(module,exports,__webpack_require__){(function(global){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(e,t){module.exports=t(e)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==global?global:this,(function(global){"use strict";global=global||{};var _Base64=global.Base64,version="2.5.2",buffer;if(module.exports)try{buffer=eval("require('buffer').Buffer")}catch(e){buffer=void 0}var b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64tab=function(e){for(var t={},n=0,r=e.length;n<r;n++)t[e.charAt(n)]=n;return t}(b64chars),fromCharCode=String.fromCharCode,cb_utob=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?fromCharCode(192|t>>>6)+fromCharCode(128|63&t):fromCharCode(224|t>>>12&15)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return fromCharCode(240|t>>>18&7)+fromCharCode(128|t>>>12&63)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t)},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=function(e){return e.replace(re_utob,cb_utob)},cb_encode=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(1<e.length?e.charCodeAt(1):0)<<8|(2<e.length?e.charCodeAt(2):0);return[b64chars.charAt(n>>>18),b64chars.charAt(n>>>12&63),2<=t?"=":b64chars.charAt(n>>>6&63),1<=t?"=":b64chars.charAt(63&n)].join("")},btoa=global.btoa?function(e){return global.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,cb_encode)},_encode=function(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)?e.toString("base64"):btoa(utob(String(e)))},encode=function(e,t){return t?_encode(String(e)).replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"})).replace(/=/g,""):_encode(e)},encodeURI=function(e){return encode(e,!0)},re_btou=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,cb_btou=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return fromCharCode(55296+(t>>>10))+fromCharCode(56320+(1023&t));case 3:return fromCharCode((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return fromCharCode((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},btou=function(e){return e.replace(re_btou,cb_btou)},cb_decode=function(e){var t=e.length,n=t%4,r=(0<t?b64tab[e.charAt(0)]<<18:0)|(1<t?b64tab[e.charAt(1)]<<12:0)|(2<t?b64tab[e.charAt(2)]<<6:0)|(3<t?b64tab[e.charAt(3)]:0),i=[fromCharCode(r>>>16),fromCharCode(r>>>8&255),fromCharCode(255&r)];return i.length-=[0,0,2,1][n],i.join("")},_atob=global.atob?function(e){return global.atob(e)}:function(e){return e.replace(/\S{1,4}/g,cb_decode)},atob=function(e){return _atob(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))},_decode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e,"base64")).toString()}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e,"base64")).toString()}:function(e){return btou(_atob(e))},decode=function(e){return _decode(String(e).replace(/[-_]/g,(function(e){return"-"==e?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,""))},noConflict=function(){var e=global.Base64;return global.Base64=_Base64,e};if(global.Base64={VERSION:version,atob:atob,btoa:btoa,fromBase64:decode,toBase64:encode,utob:utob,encode:encode,encodeURI:encodeURI,btou:btou,decode:decode,noConflict:noConflict,__buffer__:buffer},"function"==typeof Object.defineProperty){var noEnum=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};global.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",noEnum((function(){return decode(this)}))),Object.defineProperty(String.prototype,"toBase64",noEnum((function(e){return encode(this,e)}))),Object.defineProperty(String.prototype,"toBase64URI",noEnum((function(){return encode(this,!0)})))}}return global.Meteor&&(Base64=global.Base64),module.exports?module.exports.Base64=global.Base64:(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return global.Base64}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)),{Base64:global.Base64}}))}).call(this,__webpack_require__(38))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(11),i=function(){function e(){}return e.prototype.retrieveTestProcedureDocumentAnnotation=function(e){var t=this;return new Promise((function(n,r){var i=new MobileCRM.FetchXml.Entity("annotation");i.addAttributes(),i.filter=new MobileCRM.FetchXml.Filter;var o=new MobileCRM.FetchXml.Filter;o.where("objectid","eq",e),i.filter.filters.push(o),new MobileCRM.FetchXml.Fetch(i).execute("JSON",(function(i){if(i&&0<i.length){for(var o=new Array,s=0;s<i.length;s++)o.push(t.promiseGetAnnotationDocument(i[s]));t.getAllAnnotations(o).then((function(e){n(e)})).catch((function(e){r(e)}))}else r("No test procedure document annotation found for testproceduredocument: "+e)}),(function(e){r(e)}),null)}))},e.prototype.retrieveAnnotationsByObjectId=function(e){return new Promise((function(t,n){var r=new MobileCRM.FetchXml.Entity("annotation");r.addAttributes(),r.filter=new MobileCRM.FetchXml.Filter;var i=new MobileCRM.FetchXml.Filter;i.where("objectid","eq",e),r.filter.filters.push(i),new MobileCRM.FetchXml.Fetch(r).execute("JSON",(function(e){t(e)}),(function(e){n(e)}),null)}))},e.prototype.retrieveAnnotationsWithBodyByObjectId=function(e){var t=this;return new Promise((function(n,r){var i=new MobileCRM.FetchXml.Entity("annotation");i.addAttributes(),i.filter=new MobileCRM.FetchXml.Filter;var o=new MobileCRM.FetchXml.Filter;o.where("objectid","eq",e),i.filter.filters.push(o),new MobileCRM.FetchXml.Fetch(i).execute("JSON",(function(e){null!=e&&0!==e.length||n(null);var i=new Array;e.forEach((function(e){i.push(t.promiseGetAnnotationDocument(e))})),t.getAllAnnotations(i).then((function(e){n(e)})).catch((function(e){r(e)}))}),(function(e){r(e)}),null)}))},e.prototype.retrieveTestProcedureDocumentAnnotations=function(e,t){var n=this,r=e.dw_testprocedureid,i=t.dw_languageid;return new Promise((function(e,t){var o=new MobileCRM.FetchXml.Entity("annotation");o.addAttributes();var s=o.addLink("dw_testproceduredocument","dw_testproceduredocumentid","objectid","inner");s.addAttribute("dw_testproceduredocumentid"),s.addAttribute("dw_testprocedureid");var u=s.addLink("dw_testprocedure","dw_testprocedureid","dw_testprocedureid","inner");s.filter=new MobileCRM.FetchXml.Filter;var l=new MobileCRM.FetchXml.Filter;l.where("dw_language","eq",i),s.filter.filters.push(l),u.filter=new MobileCRM.FetchXml.Filter;var a=new MobileCRM.FetchXml.Filter;a.where("dw_testprocedureid","eq",r),u.filter.filters.push(a),new MobileCRM.FetchXml.Fetch(o).execute("JSON",(function(i){if(i&&0<i.length){for(var o=new Array,s=0;s<i.length;s++)o.push(n.promiseGetAnnotationDocument(i[s]));n.getAllAnnotations(o).then((function(t){e(t)})).catch((function(e){t(e)}))}else t("No test procedure document annotation found for testprocedure: "+r)}),(function(e){t(e)}),null)}))},e.prototype.retrieveTestStepDocumentAnnotations=function(e){var t=this;return new Promise((function(n,r){var i=new MobileCRM.FetchXml.Entity("annotation");i.addAttributes();var o=i.addLink("dw_teststepdocument","dw_teststepdocumentid","objectid","inner");o.addAttribute("dw_link");var s=o.addLink("dw_testproceduredoc_teststepdoc","dw_teststepdocumentid","dw_teststepdocumentid","inner").addLink("dw_testproceduredocument","dw_testproceduredocumentid","dw_testproceduredocumentid","inner");s.addAttribute("dw_testproceduredocumentid"),s.filter=new MobileCRM.FetchXml.Filter;var u=new MobileCRM.FetchXml.Filter;u.where("dw_testproceduredocumentid","eq",e),s.filter.filters.push(u),new MobileCRM.FetchXml.Fetch(i).execute("JSON",(function(e){if(e&&0<e.length){for(var i=new Array,o=0;o<e.length;o++)i.push(t.promiseGetAnnotationDocument(e[o]));t.getAllAnnotations(i).then((function(e){n(e)})).catch((function(e){r(e)}))}else n(null)}),(function(e){r(e)}),null)}))},e.prototype.retrieveTestStepResultDocumentAnnotationsForServiceOrderNumber=function(e){var t=this;return new Promise((function(n,r){null!=e&&0!==e.length||n(null);var i=new MobileCRM.FetchXml.Entity("annotation");i.addAttributes();var o=i.addLink("dw_teststepresultdocument","dw_teststepresultdocumentid","objectid","inner").addLink("dw_teststepresultheader","dw_teststepresultheaderid","dw_resultheaderid","inner").addLink("dw_serviceorder","dw_serviceorderid","dw_serviceorderid","inner");o.addAttribute("dw_serviceordernumber"),o.filter=new MobileCRM.FetchXml.Filter,o.filter.where("dw_serviceordernumber","eq",e),new MobileCRM.FetchXml.Fetch(i).execute("JSON",(function(e){if(e&&0<e.length){for(var i=new Array,o=0;o<e.length;o++)i.push(t.promiseGetAnnotationDocument(e[o]));t.getAllAnnotations(i).then((function(e){n(e)})).catch((function(e){r(e)}))}else n(null)}),(function(e){r(e)}),null)}))},e.prototype.retrieveEquipmentHistoryAnnotations=function(e){var t=this;return new Promise((function(n,r){null!=e&&0!==e.length||n(null);var i=new MobileCRM.FetchXml.Entity("annotation");i.addAttributes();var o=i.addLink("dw_equipmenthistory","dw_equipmenthistoryid","objectid","inner").addLink("speed1_installedbase","speed1_installedbaseid","dw_equipmentid","inner");o.addAttribute("speed1_installedbaseid"),o.filter=new MobileCRM.FetchXml.Filter;var s=new MobileCRM.FetchXml.Filter;s.isIn("speed1_installedbaseid",e),o.filter.filters.push(s),new MobileCRM.FetchXml.Fetch(i).execute("JSON",(function(e){if(e&&0<e.length){for(var i=new Array,o=0;o<e.length;o++)i.push(t.promiseGetAnnotationDocument(e[o]));t.getAllAnnotations(i).then((function(e){n(e)})).catch((function(e){r(e)}))}else n(null)}),(function(e){r(e)}),null)}))},e.prototype.saveAnnotation=function(e,t){var n=this;return new Promise((function(i,o){var s=null;if(null!=e.AnnotationId&&"00000000-0000-0000-0000-000000000000"!==e.AnnotationId)r.writeAnnotationToFile(e).then((function(s){n.promiseSaveAnnotationDocument(e,s,t).then((function(){return r.deleteTwaFile(e.FileName),i(!0)})).catch((function(e){return o(e)}))})).catch((function(e){return o(e)}));else{var u=(s=MobileCRM.DynamicEntity.createNew("annotation")).properties,l=new MobileCRM.Reference(t,e.ObjectId);u.documentbody=e.DocumentBody,u.filename=e.FileName,u.objectid=l,s.save((function(e){return e?o(e):i(!0)}))}}))},e.prototype.deleteAnnotation=function(e){return new Promise((function(t,n){MobileCRM.DynamicEntity.deleteById("annotation",e.AnnotationId,(function(){return t(!0)}),(function(e){return n(e)}),null)}))},e.prototype.getAllAnnotations=function(e){return new Promise((function(t,n){Promise.all(e).then((function(e){t(e)})).catch((function(e){n(e)}))}))},e.prototype.promiseGetAnnotationDocument=function(e){return new Promise((function(t,n){MobileCRM.DynamicEntity.loadDocumentBody("annotation",e.annotationid,(function(n){e.documentbody=n,t(e)}),(function(e){n(e)}))}))},e.prototype.promiseSaveAnnotationDocument=function(e,t,n){return new Promise((function(r,i){var o=new MobileCRM.Reference(n,e.ObjectId),s=new MobileCRM.Relationship("objectid",o);MobileCRM.DynamicEntity.saveDocumentBody(e.AnnotationId,null,s,t,null,(function(){r(!0)}),(function(e){i(e)}))}))},e.prototype.retrieveEquipmentHistoryTransformedXMLByInstalledBaseIfExists=function(e,t){var n=this;return new Promise((function(r,i){null==e&&r(!1);var o=new MobileCRM.FetchXml.Entity("annotation");o.addAttributes();var s=o.addLink("dw_equipmenthistory","dw_equipmenthistoryid","objectid","inner").addLink("speed1_installedbase","speed1_installedbaseid","dw_equipmentid","inner");s.filter=new MobileCRM.FetchXml.Filter;var u=new MobileCRM.FetchXml.Filter;u.where("speed1_installedbaseid","eq",e),s.filter.filters.push(u),new MobileCRM.FetchXml.Fetch(o).execute("JSON",(function(e){if(null!=e&&0<e.length)for(var o=0;o<e.length;o++)-1!=e[o].filename.indexOf(t)&&n.promiseExtractAnnotationZipContent(e[o]).then((function(){r(!0)})).catch((function(e){i(e)}));else r(!1)}),(function(e){i(e)}),null)}))},e.prototype.promiseExtractAnnotationZipContent=function(e){return new Promise((function(t,n){MobileCRM.DynamicEntity.unzipDocumentBody("annotation",e.annotationid,"EquipmentHistoryXML",(function(){t()}),(function(e){n(e)}))}))},e}();t.AnnotationDataAccess=i},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(19),i=n(11),o=n(11),s=n(44),u=n(45),l=n(46),a=n(57),c=n(6),d=n(6),f=n(58),p=n(10),w=n(63),m=n(35),h=n(64),_=function(){function e(){this.userServiceOrdersResult=null,this.serviceOrderId="",this.self=null,this.wait=null,this.serviceOrdersListArray=[],this.languageCode="",this.currentAppFolder="",this.invalidSoMessage="The selected Serviceorder [[SONumber]] has no Installedbase.\nPlease ensure that all the selected Serviceorders have been related to an Installedbase."}return e.prototype.openTwa=function(e){var t=this;this.wait=MobileCRM.UI.EntityForm.showPleaseWait("Preparing TWA content..."),this.serviceOrderId=e.entity.id,this.serviceOrdersListArray.push(this.serviceOrderId),this.userServiceOrdersResult=new u.SystemUserServiceordersResult,this.loadInitialTwaFiles().then((function(){i.writeReadyStatus(""),t.openTwaByUri("dw_serviceorderlist",t.languageCode)})).catch((function(e){t.showError(e),i.writeReadyStatus(e)}))},e.prototype.openTwaFromList=function(e){var t=this;this.wait=MobileCRM.UI.EntityForm.showPleaseWait("Preparing TWA content..."),this.serviceOrdersListArray=new Array;for(var n=0;n<e.context.entities.length;n++)this.serviceOrdersListArray.push(e.context.entities[n].id);this.userServiceOrdersResult=new u.SystemUserServiceordersResult,this.loadInitialTwaFiles().then((function(){if(!(t.userServiceOrdersResult.ServiceOrders&&0<t.userServiceOrdersResult.ServiceOrders.length))throw new Error(t.invalidSoMessage);i.writeReadyStatus(""),t.openTwaByUri("dw_serviceorderlist",t.languageCode)})).catch((function(e){t.showError(e),i.writeReadyStatus(e)}))},e.prototype.loadInitialTwaFiles=function(){var e=this;return new Promise((function(t,n){e.deleteTwaFiles().then(e.getSystemUser.bind(e)).then(e.validateResultHeaders.bind(e)).then(e.getSettings.bind(e)).then(e.getServiceOrderByList.bind(e)).then(e.getTestedDevice.bind(e)).then(e.getTechnicianTools.bind(e)).then(e.getTeamTools.bind(e)).then(e.getOptionSets.bind(e)).then(e.getAllCurrency.bind(e)).then((function(){t()})).catch((function(e){n(e)}))}))},e.prototype.deleteTwaFiles=function(){return new Promise((function(e,t){Promise.all([o.deleteTwaFile(r.FileNames.UserSettings),o.deleteTwaFile(r.FileNames.FolderNumbers),o.deleteTwaFile(r.FileNames.TestSteps),o.deleteTwaFile(r.FileNames.TestProcedureDocumentAnnotations),o.deleteTwaFile(r.FileNames.TestProcedureDocuments),o.deleteTwaFile(r.FileNames.TestProcedures),o.deleteTwaFile(r.FileNames.TestStepAnnotations),o.deleteTwaFile(r.FileNames.SystemUser),o.deleteTwaFile(r.FileNames.ServiceOrders),o.deleteTwaFile(r.FileNames.ResultHeaders),o.deleteTwaFile(r.FileNames.Languages),o.deleteTwaFile(r.FileNames.EquipmentHistories),o.deleteTwaFile(r.FileNames.InstalledBases),o.deleteTwaFile(r.FileNames.Currency),o.deleteTwaFile(r.FileNames.DataReady)]).then((function(){e()})).catch((function(e){t(e)}))}))},e.prototype.getAllCurrency=function(){return new Promise((function(e,t){(new h.TransactionCurrency).retrieveAllTransactionCurrency().then((function(t){null!=t&&(i.saveToJsonFile(t,r.FileNames.Currency),e(t)),e(null)})).catch((function(e){t(e)}))}))},e.prototype.showError=function(e){var t=this;return new Promise((function(n){if(t.wait.close(),"string"==typeof e&&0===String(e).length)return n();MobileCRM.bridge.alert(e).then((function(){return n()}))}))},e.prototype.validateResultHeaders=function(e){var t=this;return new Promise((function(n,r){var i=t.serviceOrdersListArray,o=e.systemuserid;(new m.ResultHeader).retrieveResultHeadersByServiceOrderIds(i).then((function(s){if(null!=s&&0<s.length){for(var u=!1,l=new Array,a=new Array,c=0;c<s.length;c++){var d=s[c],f=d["CL0.dw_serviceordernumber"],p=d.dw_serviceorderid.id;if(t.isResultHeaderAlreadyCompleted(d)&&(l.push(f),a.push(p)),t.isServiceOrderOwnerDifferentToResultHeader(d,o))return u=!0,t.showResolveResultHeaderMessage(f,d,r)}var w=new Array;if(0<a.length)return i.forEach((function(e){a.indexOf(e)<0&&w.push(e)})),t.serviceOrdersListArray=w,t.showAlreadyCompletedResultHeaderMessage(l,n,r,e);!1===u&&n(e)}else n(e)})).catch((function(e){r(e)}))}))},e.prototype.isResultHeaderAlreadyCompleted=function(e){return null!=e.dw_signatureid},e.prototype.showResolveResultHeaderMessage=function(e,t,n){var r="At least one result header belongs to a different user. Serviceorder No.: "+e,i=new MobileCRM.UI.MessageBox("Warning");i.items=["Resolve","Ok"],i.multiLine=!0,i.defaultText=r,i.show((function(e){"Resolve"==e&&MobileCRM.UI.FormManager.showEditDialog("dw_teststepresultheader",t.dw_teststepresultheaderid,null),n("")}))},e.prototype.showAlreadyCompletedResultHeaderMessage=function(e,t,n,r){var i=this,o="At least one result header is already completed. Serviceorder(s) No.: "+e.join(),s=new MobileCRM.UI.MessageBox("Warning");s.items=["Ok"],s.multiLine=!0,s.defaultText=o,s.show((function(){return null==i.serviceOrderId?t(r):n("")}))},e.prototype.isServiceOrderOwnerDifferentToResultHeader=function(e,t){return e.ownerid.id!=t},e.prototype.getSettings=function(e){var t=this;return new Promise((function(n,o){(new f.Settings).retrieveSettings(e).then((function(e){i.saveToJsonFile(e,r.FileNames.UserSettings),t.languageCode=s.mapLanguageCodes(e.TwaUserSettings.LanguageName);var o=e.CurrentAppFolder.split("Roaming");2===o.length&&(0===o[1].indexOf("\\",0)&&(o[1]=o[1].substring(1)),t.currentAppFolder=o[1]),n(e)})).catch((function(e){o(e)}))}))},e.prototype.getSystemUser=function(){var e=this;return new Promise((function(t,n){(new p.SystemUser).retrieveSystemUser().then((function(n){i.saveToJsonFile(n,r.FileNames.SystemUser),e.userServiceOrdersResult.SystemUser=n,t(n)})).catch((function(e){n(e)}))}))},e.prototype.getTestedDevice=function(){var e=this;return new Promise((function(t,n){var r=new l.MoTestedDevice;e.userServiceOrdersResult.ServiceOrders?r.getTestedDevice(e.userServiceOrdersResult.SystemUser,e.userServiceOrdersResult.ServiceOrders).then((function(e){t(e)})).catch((function(e){n(e)})):n(e.invalidSoMessage)}))},e.prototype.getServiceOrder=function(){var e=this;return new Promise((function(t,n){c.retrieveServiceorderById(e.serviceOrderId).then((function(n){e.userServiceOrdersResult.ServiceOrders=n,i.saveToJsonFile(n,r.FileNames.ServiceOrders),t(n)})).catch((function(e){n(e)}))}))},e.prototype.getTechnicianTools=function(){return new Promise((function(e,t){(new w.Tools).retrieveTechnicianTools().then((function(t){i.saveToJsonFile(t,r.FileNames.TechnicianTools),e(t)})).catch((function(e){t(e)}))}))},e.prototype.getTeamTools=function(){return new Promise((function(e,t){(new w.Tools).retrieveTeamTools().then((function(t){i.saveToJsonFile(t,r.FileNames.TeamTools),e(t)})).catch((function(e){t(e)}))}))},e.prototype.getOptionSets=function(){return new Promise((function(e,t){a.retrieveOptionSetValues("dw_teststepresultheader","dw_overallresult").then((function(t){i.saveToJsonFile(t,r.FileNames.OverallResults),e(t)})).catch((function(e){t(e)}))}))},e.prototype.getServiceOrderByList=function(){var e=this;return new Promise((function(t,n){d.retrieveServiceorderByIds(e.serviceOrdersListArray).then((function(n){var o=!1;if(n){for(var s=0;s<n.length&&!o;s++)if(!n[s].dw_installedbaseid){var u=n[s].dw_serviceordernumber;o=!0,e.invalidSoMessage=e.invalidSoMessage.replace("[SONumber]",u)}o?t(null):(e.userServiceOrdersResult.ServiceOrders=n,i.saveToJsonFile(n,r.FileNames.ServiceOrders),t(n))}else t(null)})).catch((function(e){n(e)}))}))},e.prototype.openTwaByUri=function(e,t){var n="twa://testcard/openserviceorder?orglcid=1033&orgname=sb-cstm-fasttrack&typename="+e+"&userlcid="+t+"&connectionmode=Web&crmUrl=Resco";n=n+"&ExecutionFolder="+this.currentAppFolder,this.wait.close(),MobileCRM.Platform.openUrl(n)},e}();t.TwaStart=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapLanguageCodes=function(e){switch(e){case"en-US":return"1033";case"de-DE":return"1031";case"fr-FR":return"1036";default:return"1033"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SystemUserServiceordersResult=function(){}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(37),i=n(47),o=n(11),s=n(4),u=n(48),l=n(35),a=n(53),c=n(55),d=n(56),f=n(19),p=function(){function e(){}return e.prototype.getTestedDevice=function(e,t){var n=this,r=new c.TestedDeviceResult,i=[];return new Promise((function(o,s){Promise.all([n.getInstalledBases(t),n.getLanguages(e),n.getResultHeader(t)]).then((function(e){var t=e[0];i=e[1];var l=e[2];Promise.all([n.getEquipmentHistories(t),n.getTestStepResults(l),n.getTestStepResultDocuments(l)]).then((function(){return(new u.MoTestProcedure).getTestProcedures(t,i).then((function(e){r.TestProcedures=e.TestProcedures,r.TestProcedureDocuments=e.TestProcedureDocuments,r.Languages=i,o(r)})).catch((function(e){s(e)}))})).catch((function(e){s(e)}))})).catch((function(e){s(e)}))}))},e.prototype.getEquipmentHistories=function(e){return new Promise((function(t,n){for(var i=[],s=0;s<e.length;s++)i.push(e[s].speed1_installedbaseid);(new r.AnnotationDataAccess).retrieveEquipmentHistoryAnnotations(i).then((function(e){o.saveToJsonFile(e,f.FileNames.EquipmentHistories),t(!0)}),(function(e){n(e)}))}))},e.prototype.getTestStepResults=function(e){return new Promise((function(t,n){if(null==e||0===e.length)return o.saveToJsonFile(new Array,f.FileNames.TwaTestStepResults),t(!0);for(var r=[],i=0;i<e.length;i++)r.push(e[i].dw_teststepresultheaderid);(new a.TestStepResult).retrieveTestStepResults(r).then((function(e){o.saveToJsonFile(e,f.FileNames.TwaTestStepResults),t(!0)}),(function(e){n(e)}))}))},e.prototype.getTestStepResultDocuments=function(e){return new Promise((function(t,n){if(null==e||0===e.length)return o.saveToJsonFile(new Array,f.FileNames.TwaTestStepResultDocuments),t(!0);for(var i=[],s=0;s<e.length;s++)i.push(e[s].dw_teststepresultheaderid);(new d.TestStepResultDocument).retrieveTestStepResultDocuments(i).then((function(e){var i=new Array,s=new r.AnnotationDataAccess;if(null==e||0===e.length)return o.saveToJsonFile(new Array,f.FileNames.TwaTestStepResultDocuments),t(!0);e.forEach((function(e){i.push(s.retrieveAnnotationsWithBodyByObjectId(e.dw_teststepresultdocumentid))})),Promise.all(i).then((function(n){var r=new Array;e.forEach((function(e){e.body="",n.forEach((function(t){if(null!=t&&0<t.length){var n=t[0];n.objectid.id===e.dw_teststepresultdocumentid&&(e.body=n.documentbody)}})),r.push(e)})),o.saveToJsonFile(r,f.FileNames.TwaTestStepResultDocuments),t(!0)})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))},e.prototype.getLanguages=function(e){var t=new i.CrmRolloutDataAccess;return new Promise((function(n,r){t.retrieveCrmRolloutLanguages(e).then((function(e){null!=e&&0!==e.length||r("No languages found!"),o.saveToJsonFile(e,f.FileNames.Languages),n(e)}),(function(e){r(e)}))}))},e.prototype.getInstalledBases=function(e){var t=[];if(e)for(var n=0;n<e.length;n++)e[n].dw_installedbaseid&&t.push(e[n].dw_installedbaseid.id);return new Promise((function(e,n){(new s.InstalledBase).retrieveInstalledBaseByIds(t).then((function(t){null!=t&&0!==t.length||n("No Installed Base found"),o.saveToJsonFile(t,"InstalledBases.json"),e(t)}),(function(e){n(e)}))}))},e.prototype.getResultHeader=function(e){var t=[];if(e)for(var n=0;n<e.length;n++)t.push(e[n].dw_serviceorderid);var r=new l.ResultHeader;return new Promise((function(e,n){r.retrieveResultHeadersByServiceOrderIds(t).then((function(t){o.saveToJsonFile(t,"ResultHeaders.json"),e(t)}),(function(e){n(e)}))}))},e}();t.MoTestedDevice=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.retrieveCrmRolloutLanguages=function(e){return new Promise((function(t,n){var r=e.speed1_division,i=e.dw_org_key_2,o=e.dw_org_key_3,s=e.dw_org_key_4,u=e.dw_companycode,l=new MobileCRM.FetchXml.Entity("dw_language");l.addAttributes();var a=l.addLink("dw_languages_crmrollout","dw_languageid","dw_languageid","inner").addLink("dw_crmrollout","dw_crmrolloutid","dw_crmrolloutid","inner");a.filter=new MobileCRM.FetchXml.Filter;var c=new MobileCRM.FetchXml.Filter;c.where("dw_bukrs","eq",u),a.filter.filters.push(c);var d=new MobileCRM.FetchXml.Filter;d.where("dw_division","eq",r),a.filter.filters.push(d);var f=new MobileCRM.FetchXml.Filter;f.where("dw_org_key_2","eq",i),a.filter.filters.push(f);var p=new MobileCRM.FetchXml.Filter;p.where("dw_org_key_3","eq",o),a.filter.filters.push(p);var w=new MobileCRM.FetchXml.Filter;w.where("dw_org_key_4","eq",s),a.filter.filters.push(w),new MobileCRM.FetchXml.Fetch(l).execute("JSON",(function(e){return e&&0<e.length?t(e):n("No languages found for this systemuser.")}),(function(e){n(e)}),null)}))},e}();t.CrmRolloutDataAccess=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(19),i=n(11),o=n(49),s=n(50),u=n(51),l=n(52),a=function(){function e(){}return e.prototype.getTestProcedures=function(e,t){var n=this;return new Promise((function(e,r){var i=new l.TestProcedureResult,s=[],u=[],a=[];a.push(n.getCountOfTestProcedureDocumentsByLanguage(t)),a.push(n.getCountOfTestProceduresByLanguage(t)),Promise.all(a).then((function(l){for(var a=Math.ceil(l[0]/500),c=1;c<=a;c++)s.push(n.getTestProcedureDocumentsByLanguage(t,c));var d=Math.ceil(l[1]/500);for(c=1;c<=d;c++)u.push(n.getTestProceduresByLanguage(t,c));Promise.all([n.getPromiseAllTestProcedureDocuments(s),n.getPromiseAllTestProcedures(u)]).then((function(t){null!=t[0]&&0!==t[0].length||r("No test procedure documents found!"),null!=t[1]&&0!==t[1].length||r("No test procedures found!");var s=[],u=new o.FolderNumber;u.retrieveCountOfAllFolderNumbers().then((function(o){for(var l=Math.ceil(o/500),a=1;a<=l;a++)s.push(u.retrieveAllFolderNumbers(a));n.getPromiseAllFolderNumbers(s).then((function(){i.TestProcedureDocuments=t[0],i.TestProcedures=t[1],e(i)})).catch((function(e){r(e)}))})).catch((function(e){r(e)}))})).catch((function(e){r(e)}))})).catch((function(e){r(e)}))}))},e.prototype.getTestProcedureDocumentsByLanguage=function(e,t){return(new u.TestProcedureDocument).retrieveTestProcedureDocumentByLanguages(e,t)},e.prototype.getCountOfTestProcedureDocumentsByLanguage=function(e){return(new u.TestProcedureDocument).retrieveCountOfTestProcedureDocumentByLanguages(e)},e.prototype.getTestProceduresByLanguage=function(e,t){return(new s.TestProcedure).retrieveTestProcedureByLanguage(e,t)},e.prototype.getCountOfTestProceduresByLanguage=function(e){return(new s.TestProcedure).retrieveCountOfTestProcedureByLanguage(e)},e.prototype.getPromiseAllTestProcedureDocuments=function(e){return new Promise((function(t,n){Promise.all(e).then((function(e){for(var n=[],o=0;o<e.length;o++)if(null!=e[o])for(var s=0;s<e[o].length;s++)n.push(e[o][s]);i.saveToJsonFile(n,r.FileNames.TestProcedureDocuments),t(n)})).catch((function(e){n(e)}))}))},e.prototype.getPromiseAllTestProcedures=function(e){return new Promise((function(t,n){Promise.all(e).then((function(e){for(var n=[],o=0;o<e.length;o++)if(null!=e[o])for(var s=0;s<e[o].length;s++)n.push(e[o][s]);i.saveToJsonFile(n,r.FileNames.TestProcedures),t(n)})).catch((function(e){n(e)}))}))},e.prototype.getPromiseAllFolderNumbers=function(e){return new Promise((function(t,n){Promise.all(e).then((function(e){for(var n=[],o=0;o<e.length;o++)if(null!=e[o])for(var s=0;s<e[o].length;s++)n.push(e[o][s]);i.saveToJsonFile(n,r.FileNames.FolderNumbers),t(n)})).catch((function(e){n(e)}))}))},e}();t.MoTestProcedure=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.retrieveFolderNumberTestProcedure=function(e){return new Promise((function(t,n){var r=new MobileCRM.FetchXml.Entity("dw_foldernumber_testprocedure");r.addAttributes();var i=r.addLink("dw_foldernumber","dw_foldernumberid","dw_foldernumberid","inner");i.addAttributes(),i.filter=new MobileCRM.FetchXml.Filter;var o=new MobileCRM.FetchXml.Filter;o.where("dw_foldernumber","eq",e),i.filter.filters.push(o),new MobileCRM.FetchXml.Fetch(r).execute("JSON",(function(e){null!=e&&0<e.length&&t(e),t(null)}),(function(e){n(e)}),null)}))},e.prototype.retrieveAllFolderNumbers=function(e){return new Promise((function(t,n){var r=new MobileCRM.FetchXml.Entity("dw_foldernumber_testprocedure");r.addAttributes(),r.addLink("dw_foldernumber","dw_foldernumberid","dw_foldernumberid","inner").addAttributes();var i=new MobileCRM.FetchXml.Fetch(r);i.page=e,i.execute("JSON",(function(e){null!=e&&0<e.length&&t(e),t(null)}),(function(e){n(e)}),null)}))},e.prototype.retrieveCountOfAllFolderNumbers=function(){return new Promise((function(e,t){var n=new MobileCRM.FetchXml.Entity("dw_foldernumber_testprocedure");n.addAttribute("dw_foldernumberid"),n.attributes[0].aggregate="count",n.attributes[0].alias="recordcount",new MobileCRM.FetchXml.Fetch(n).execute("JSON",(function(t){null!=t&&0<t.length&&e(t[0].recordcount),e(0)}),(function(e){t(e)}),null)}))},e}();t.FolderNumber=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.retrieveTestProcedureByLanguage=function(e,t){return new Promise((function(n,r){var i=new MobileCRM.FetchXml.Entity("dw_testprocedure");i.addAttributes();var o=i.addLink("dw_testproceduredocument","dw_testprocedureid","dw_testprocedureid","inner");o.addLink("annotation","objectid","dw_testproceduredocumentid","inner");for(var s=o.addLink("dw_language","dw_languageid","dw_language","inner"),u=[],l=0;l<e.length;l++)u.push(e[l].dw_languageid);var a=new MobileCRM.FetchXml.Filter;a.isIn("dw_languageid",u),s.filter=a;var c=new MobileCRM.FetchXml.Fetch(i);c.page=t,c.execute("JSON",(function(e){null!=e&&0<e.length&&n(e),n(null)}),(function(e){r(e)}),null)}))},e.prototype.retrieveCountOfTestProcedureByLanguage=function(e){return new Promise((function(t,n){var r=new MobileCRM.FetchXml.Entity("dw_testprocedure");r.addAttribute("dw_testprocedureid"),r.attributes[0].aggregate="count",r.attributes[0].alias="recordcount";var i=r.addLink("dw_testproceduredocument","dw_testprocedureid","dw_testprocedureid","inner");i.addLink("annotation","objectid","dw_testproceduredocumentid","inner");for(var o=i.addLink("dw_language","dw_languageid","dw_language","inner"),s=[],u=0;u<e.length;u++)s.push(e[u].dw_languageid);var l=new MobileCRM.FetchXml.Filter;l.isIn("dw_languageid",s),o.filter=l;var a=new MobileCRM.FetchXml.Fetch(r);a.aggregate=!0,a.execute("JSON",(function(e){null!=e&&0<e.length&&t(e[0].recordcount),t(0)}),(function(e){n(e)}),null)}))},e}();t.TestProcedure=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.retrieveTestProcedureDocumentByLanguages=function(e,t){return new Promise((function(n,r){var i=new MobileCRM.FetchXml.Entity("dw_testproceduredocument");i.addAttributes(),i.addLink("dw_testprocedure","dw_testprocedureid","dw_testprocedureid","inner"),i.addLink("annotation","objectid","dw_testproceduredocumentid","inner");for(var o=i.addLink("dw_language","dw_languageid","dw_language","inner"),s=[],u=0;u<e.length;u++)s.push(e[u].dw_languageid);var l=new MobileCRM.FetchXml.Filter;l.isIn("dw_languageid",s),o.filter=l;var a=new MobileCRM.FetchXml.Fetch(i);a.page=t,a.execute("JSON",(function(e){null!=e&&0<e.length&&n(e),n(null)}),(function(e){r(e)}),null)}))},e.prototype.retrieveCountOfTestProcedureDocumentByLanguages=function(e){return new Promise((function(t,n){var r=new MobileCRM.FetchXml.Entity("dw_testproceduredocument");r.addAttribute("dw_testprocedureid"),r.attributes[0].aggregate="count",r.attributes[0].alias="recordcount",r.addLink("dw_testprocedure","dw_testprocedureid","dw_testprocedureid","inner"),r.addLink("annotation","objectid","dw_testproceduredocumentid","inner");for(var i=r.addLink("dw_language","dw_languageid","dw_language","inner"),o=[],s=0;s<e.length;s++)o.push(e[s].dw_languageid);var u=new MobileCRM.FetchXml.Filter;u.isIn("dw_languageid",o),i.filter=u;var l=new MobileCRM.FetchXml.Fetch(r);l.aggregate=!0,l.execute("JSON",(function(e){null!=e&&0<e.length&&t(e[0].recordcount),t(0)}),(function(e){n(e)}),null)}))},e}();t.TestProcedureDocument=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TestProcedureResult=function(){}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(54),i=function(){function e(){}return e.prototype.retrieveTestStepResults=function(e){return new Promise((function(t,n){var r=new MobileCRM.FetchXml.Entity("dw_teststepresult");r.addAttributes(),r.filter=new MobileCRM.FetchXml.Filter,r.filter.isIn("dw_teststepresultheaderid",e),new MobileCRM.FetchXml.Fetch(r).execute("JSON",(function(e){null!=e&&0<e.length&&t(e),t(null)}),(function(e){n(e)}),null)}))},e.prototype.createTestStepResult=function(e){return new Promise((function(t,n){var i=null,o=(i=MobileCRM.DynamicEntity.createNew("dw_teststepresult")).properties,s=new MobileCRM.Reference("dw_teststepresultheader",e.ResultHeaderId),u=new MobileCRM.Reference("dw_teststep",e.TestStepId);o.dw_comment=e.Comment,o.dw_divisionmt=!0,o.dw_divisionst=!1,o.dw_editablelistvalue=e.ListItemText,null!=e.ResultCompleted?o.dw_resultcompleted=e.ResultCompleted?1:0:o.dw_resultcompleted=null,null!=e.IsLocked&&(o.dw_islocked=e.IsLocked?1:0),o.dw_resultdate=e.ResultDate,o.dw_resultmeasurement=e.ResultMeasurement,o.dw_resulttext=e.ResultText,o.dw_teststepresultheaderid=s,o.dw_teststepid=u,i.save((function(e){if(e)return n(e);var o={dw_comment:i.properties.dw_comment,createdby:i.properties.createdby,dw_divisionmt:i.properties.dw_divisionmt,dw_divisionst:i.properties.dw_divisionst,dw_editablelistvalue:i.properties.dw_editablelistvalue,dw_islocked:i.properties.dw_islocked,dw_listitemtext:i.properties.dw_listitemtext,modifiedby:i.properties.modifiedby,dw_resultcompleted:i.properties.dw_resultcompleted,dw_resultdate:i.properties.dw_resultdate,dw_resultfile:i.properties.dw_resultfile,dw_resultmeasurement:i.properties.dw_resultmeasurement,dw_resulttext:i.properties.dw_resulttext,dw_teststepresultheaderid:i.properties.dw_teststepresultheaderid,dw_teststepid:i.properties.dw_teststepid,dw_teststepresultid:i.properties.dw_teststepresultid,CurrentEntityTrackingState:r.EntityTrackingState.Added};return t(o)}))}))},e.prototype.updateTestStepResult=function(e){return new Promise((function(t,n){var i=null,o=(i=new MobileCRM.DynamicEntity("dw_teststepresult",e.TestStepResultId)).properties;o.dw_comment=e.Comment,o.dw_editablelistvalue=e.ListItemText,null!=e.ResultCompleted?o.dw_resultcompleted=e.ResultCompleted?1:0:o.dw_resultcompleted=null,o.dw_islocked=e.IsLocked?1:0,o.dw_resultdate=e.ResultDate,o.dw_resultmeasurement=e.ResultMeasurement,o.dw_resulttext=e.ResultText,i.save((function(e){if(e)return n(e);var o={dw_comment:i.properties.dw_comment,createdby:i.properties.createdby,dw_divisionmt:i.properties.dw_divisionmt,dw_divisionst:i.properties.dw_divisionst,dw_editablelistvalue:i.properties.dw_editablelistvalue,dw_islocked:i.properties.dw_islocked,dw_listitemtext:i.properties.dw_listitemtext,modifiedby:i.properties.modifiedby,dw_resultcompleted:i.properties.dw_resultcompleted,dw_resultdate:i.properties.dw_resultdate,dw_resultfile:i.properties.dw_resultfile,dw_resultmeasurement:i.properties.dw_resultmeasurement,dw_resulttext:i.properties.dw_resulttext,dw_teststepresultheaderid:i.properties.dw_teststepresultheaderid,dw_teststepid:i.properties.dw_teststepid,dw_teststepresultid:i.properties.dw_teststepresultid,CurrentEntityTrackingState:r.EntityTrackingState.Updated};return t(o)}))}))},e.prototype.deleteTestStepResult=function(e){return new Promise((function(t,n){MobileCRM.DynamicEntity.deleteById("dw_teststepresult",e.TestStepResultId,(function(){return t(!0)}),(function(e){return n(e)}),null)}))},e}();t.TestStepResult=i},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),(r=t.EntityTrackingState||(t.EntityTrackingState={}))[r.New=1]="New",r[r.Existing=2]="Existing",r[r.Added=3]="Added",r[r.Deleted=4]="Deleted",r[r.Updated=5]="Updated"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TestedDeviceResult=function(){}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(37),i=function(){function e(){}return e.prototype.retrieveTestStepResultDocuments=function(e){return new Promise((function(t,n){var r=new MobileCRM.FetchXml.Entity("dw_teststepresultdocument");r.addAttributes(),r.filter=new MobileCRM.FetchXml.Filter,r.filter.isIn("dw_resultheaderid",e),new MobileCRM.FetchXml.Fetch(r).execute("JSON",(function(e){null!=e&&0<e.length&&t(e),t(null)}),(function(e){n(e)}),null)}))},e.prototype.createTestStepResultDocument=function(e){return new Promise((function(t,n){var i=null,o=(i=MobileCRM.DynamicEntity.createNew("dw_teststepresultdocument")).properties,s=new MobileCRM.Reference("dw_teststepresult",e.TestStepResultId),u=new MobileCRM.Reference("dw_teststepresultheader",e.ResultHeaderId);o.dw_filename=e.TestStepResultDocumentFileName,o.dw_resultheaderid=u,o.dw_teststepresultid=s;var l=new r.AnnotationDataAccess;i.save((function(r){if(r)return n(r);var o={DocumentBody:e.Body,FileName:e.FileName,ObjectId:i.properties.dw_teststepresultdocumentid};l.saveAnnotation(o,"dw_teststepresultdocument").then((function(){var e={createdby:i.properties.createdby,dw_filename:i.properties.dw_filename,modifiedby:i.properties.modifiedby,dw_resultheaderid:i.properties.dw_resultheaderid,dw_teststepresultid:i.properties.dw_teststepresultid,dw_teststepresultdocumentid:i.properties.dw_teststepresultdocumentid};return t(e)})).catch((function(e){return n(e)}))}))}))},e.prototype.updateTestStepResultDocument=function(e){return new Promise((function(t,n){var r=null;(r=new MobileCRM.DynamicEntity("dw_teststepresultdocument",e.TestStepAttachmentId)).properties.dw_filename=e.TestStepResultDocumentFileName,r.save((function(e){return e?n(e):t(!0)}))}))},e.prototype.deleteTestStepResultDocument=function(e){return new Promise((function(t,n){MobileCRM.DynamicEntity.deleteById("dw_teststepresultdocument",e.TestStepAttachmentId,(function(){return t(!0)}),(function(e){return n(e)}),null)}))},e}();t.TestStepResultDocument=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.retrieveOptionSetValues=function(e,t){return new Promise((function(n,r){null!=e&&0!==e.length||n(null),null!=t&&0!==t.length||n(null),MobileCRM.Metadata.getOptionSetValues(e,t,(function(e){n(e)}),(function(e){r(e)}),null)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(14),i=n(59),o=n(60),s=n(61),u=n(62),l=function(){function e(){}return e.prototype.retrieveSettings=function(e){var t=this;return new Promise((function(n,r){Promise.all([t.getApplicationSettings(e),t.getFormatSettings(),t.getRescoExecutingUserSettings()]).then((function(e){var t=new s.UserSettingsData;t.TwaApplicationSettings=e[0],t.TwaUserSettings=e[1],t.CurrentAppFolder=e[2].storageDirectory,n(t)})).catch((function(e){r(e)}))}))},e.prototype.getRescoExecutingUserSettings=function(){return new Promise((function(e,t){MobileCRM.Configuration.requestObject((function(t){e(t)}),(function(e){t(e)}),null)}))},e.prototype.getFormatSettings=function(){return new Promise((function(e,t){var n=new u.CultureInfo;n.retrieveDateAndNumberSettings().then((function(r){var i=new o.TwaUserSettings;i.UserDateFormat=r.UserDateFormat,i.CurrencySymbol=r.CurrencySymbol,i.DecimalSymbol=r.DecimalSymbol,i.NumberSeparator=r.NumberSeparator,i.LanguageName=r.LanguageName,n.retrieveLocalization().then((function(t){return i.LanguageName=t,e(i)})).catch((function(e){return t(e)}))})).catch((function(e){return t(e)}))}))},e.prototype.getApplicationSettings=function(e){return new Promise((function(t,n){(new r.ApplicationFeatureSetting).retrieveApplicationFeatureSettings("Service Process",e.speed1_division,e.dw_org_key_2,e.dw_org_key_3,e.dw_org_key_4).then((function(e){var n=new i.TwaApplicationSettings;return n.IsCheckTestToolsRequired=e.IsCheckTestToolsRequired,n.IsCompleteAllTestStepsRequired=e.IsCompleteAllTestStepsRequired,n.SupportedTwaVersion=e.SupportedTwaVersion,t(n)})).catch((function(e){return n(e)}))}))},e.prototype.retrieveUserSettings=function(){return new Promise((function(e,t){var n=new MobileCRM.FetchXml.Entity("usersettings");n.addAttributes(),n.filter=new MobileCRM.FetchXml.Filter,n.filter.where("systemuserid","eq-userid",null),new MobileCRM.FetchXml.Fetch(n).execute("JSON",(function(t){null!=t&&0<t.length&&e(t),e(null)}),(function(e){t(e)}),null)}))},e}();t.Settings=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TwaApplicationSettings=function(){}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TwaUserSettings=function(){}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserSettingsData=function(){}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.retrieveDateAndNumberSettings=function(){return new Promise((function(e,t){MobileCRM.CultureInfo.initialize((function(t){var n={CurrencySymbol:t.numberFormat.currencySymbol,DecimalSymbol:t.numberFormat.currencyDecimalSeparator,LanguageName:t.name,NumberSeparator:t.numberFormat.currencyGroupSeparator,UserDateFormat:t.dateTimeFormat.shortDatePattern};return e(n)}),(function(e){return t(e)}))}))},e.prototype.retrieveLocalization=function(){return new Promise((function(e,t){MobileCRM.Localization.getLoadedLangId((function(t){return e(t)}),(function(e){return t(e)}))}))},e}();t.CultureInfo=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.retrieveTechnicianTools=function(){return new Promise((function(e,t){var n=new MobileCRM.FetchXml.Entity("dw_mytool");n.addAttributes(),n.addLink("dw_localmaterial","dw_localmaterialid","dw_localmaterialid","inner").addAttributes(),n.filter=new MobileCRM.FetchXml.Filter;var r=new MobileCRM.FetchXml.Filter;r.where("ownerid","eq-userid",null),n.filter.filters.push(r);var i=new MobileCRM.FetchXml.Filter;i.where("statecode","eq",0),n.filter.filters.push(i),new MobileCRM.FetchXml.Fetch(n).execute("JSON",(function(t){null!=t&&0<t.length&&e(t),e(null)}),(function(e){t(e)}),null)}))},e.prototype.retrieveTeamTools=function(){return new Promise((function(e,t){var n=new MobileCRM.FetchXml.Entity("dw_mytool");n.addAttributes(),n.addLink("dw_localmaterial","dw_localmaterialid","dw_localmaterialid","inner").addAttributes();var r=n.addLink("team","teamid","owningteam","inner").addLink("teammembership","teamid","teamid","inner").addLink("systemuser","systemuserid","systemuserid","inner");n.filter=new MobileCRM.FetchXml.Filter;var i=new MobileCRM.FetchXml.Filter;i.where("systemuserid","eq-userid",null),r.filter=i;var o=new MobileCRM.FetchXml.Filter;o.where("statecode","eq",0),n.filter.filters.push(o),new MobileCRM.FetchXml.Fetch(n).execute("JSON",(function(t){null!=t&&0<t.length&&e(t),e(null)}),(function(e){t(e)}),null)}))},e}();t.Tools=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(36);var r=function(){function e(){}return e.prototype.retrieveTransactionCurrencyById=function(e){return new Promise((function(t,n){var r=new MobileCRM.FetchXml.Entity("transactioncurrency");r.addAttributes(),r.filter=new MobileCRM.FetchXml.Filter,r.filter.where("transactioncurrencyid","eq",e),new MobileCRM.FetchXml.Fetch(r).execute("JSON",(function(e){null!=e&&0<e.length&&t(e[0]),t(null)}),(function(e){n(e)}),null)}))},e.prototype.retrieveAllTransactionCurrency=function(){return new Promise((function(e,t){var n=new MobileCRM.FetchXml.Entity("transactioncurrency");n.addAttributes(),new MobileCRM.FetchXml.Fetch(n).execute("JSON",(function(t){null!=t&&0<t.length&&e(t),e(null)}),(function(e){t(e)}),null)}))},e}();t.TransactionCurrency=r},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(125)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(43),i=function(){function e(){}return e.prototype.initialize=function(){MobileCRM.UI.EntityForm.onCommand("custom_openTwa",(function(e){(new r.TwaStart).openTwa(e)}),!0)},e}();t.TwaForm=i}]);
//# sourceMappingURL=twa_form.resco.js.map