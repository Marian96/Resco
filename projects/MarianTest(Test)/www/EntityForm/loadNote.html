<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Sample Offline HTML page</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="initial-scale=1, user-scalable=no" />
    <meta http-equiv="pragma" content="no-cache" />
    <meta http-equiv="Cache-Control" content="no-store" />
    <script src="../JSBridge.js"></script>
</head>

<body>


    <script>
        window.onload = loadNote();


        function loadNote() {

            var entity = new MobileCRM.FetchXml.Entity("annotation");
            entity.addAttribute("annotationid");
            entity.addAttribute("subject");
            entity.addAttribute("objectid");
            var filter = new MobileCRM.FetchXml.Filter();
            filter.where("subject", "eq", "Note created on 3/24/2020 10:14 AM");
            entity.filter = filter
            var fetch = new MobileCRM.FetchXml.Fetch(entity);
            fetch.execute(
                "DynamicEntities", // Take the results as an array of arrays with field values
                      
                function(result) {         
                    if (typeof(result) != "undefined") {            
                        for (var i in result) {               
                            var dynamicEntity = result[0];
                            var anId = dynamicEntity.properties.annotationid
                            var regarding = dynamicEntity.properties.objectid;


                            MobileCRM.UI.EntityForm.requestObject(
                                function(entityForm) {
                                    /// <param name="entityForm" type="MobileCRM.UI.EntityForm"/>
                                    // Get the MobileCRM.DynamicEntity which is being edited on this form
                                    var entity = entityForm.entity;
                                    regarding = entity.id;
                                    dynamicEntity.save(function(err) {
                                        if (err) {
                                            MobileCRM.bridge.alert(err);
                                        }
                                    })
                                    return true;
                                },
                                function(err) {
                                    MobileCRM.bridge.alert("An error occurred: " + err);
                                },
                                null
                            );


                            // }, MobileCRM.bridge.alert, null);            
                        }
                    }
                },
                function(err) {
                    MobileCRM.bridge.alert("Error fetching accounts: " + err);
                },
                null
            );


        }
    </script>

</body>

</html>